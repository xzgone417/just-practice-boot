<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.exp.ucmp.xxljob.dao.JobReceiveRspUserInfoDao">

    <resultMap id="sysParentUserInfoResultMap" type="com.exp.ucmp.parentUser.dto.JobReceiveRspUserInfoDto">
        <result column="rsp_user_info_id" property="rspUserInfoId" jdbcType="INTEGER"/>
        <result column="hhr_empid" property="hhrEmpid" jdbcType="VARCHAR"/>
        <result column="hhr_name" property="hhrName" jdbcType="VARCHAR"/>
        <result column="is_enable" property="isEnable" jdbcType="INTEGER"/>
        <result column="hhr_dept_name" property="hhrDeptName" jdbcType="VARCHAR"/>
        <result column="hhr_location" property="hhrLocation" jdbcType="VARCHAR"/>
        <result column="hhr_gender" property="hhrGender" jdbcType="VARCHAR"/>
        <result column="role_Name" property="roleName" jdbcType="VARCHAR"/>
    </resultMap>

    <sql id="sysParentUserInfoColumnList">
            rsp_user_info_id,
            hhr_empid,
            hhr_name,
            is_enable,
            hhr_dept_name,
            hhr_location,
            hhr_gender,
            role_Name
    </sql>

    <select id="findListPage" parameterType="com.exp.ucmp.parentUser.dto.JobReceiveRspUserInfoDto" resultMap="sysParentUserInfoResultMap">
        SELECT
        <include refid="sysParentUserInfoColumnList"/>
        FROM
        t_sys_organization_staff_info info
        LEFT JOIN
            t_party_role_rela pr
        ON
            info.rsp_user_info_id = pr.party_id
        LEFT JOIN
            t_role_info tr
        ON
            pr.role_id = tr.role_id
        <where>
            info.is_delete = 0
            <if test="hhrName != null and hhrName != ''">
                AND info.hhr_name like concat('%',#{hhrName},'%')
            </if>
            <if test="isEnable != null and isEnable != ''">
                AND info.is_enable = #{isEnable}
            </if>
        </where>
    </select>

</mapper>