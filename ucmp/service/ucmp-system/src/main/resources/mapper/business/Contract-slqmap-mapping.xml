<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.exp.ucmp.contract.dao.ContractDao">

	<select id="querySalePrice" resultType="java.lang.Double">
		select
			tpsi.sale_price
		from
			t_psi_car_stock_info tpsi
		where
			tpsi.stock_id = #{stockId}
	</select>
	
	<select id="queryCompanyDto" resultType="com.exp.ucmp.contract.dto.CompanyDto">
		select
			company_title companyTitle,
			tax_number taxNumber,
			address,
			phone,
			receiving_bank receivingBank,
			receiving_bank_account receivingBankAccount
		from
			t_sys_company_info tci
		where
			tci.tax_number = #{taxNumber}
	</select>
	
	<select id="queryCompanyDtoList" resultType="com.exp.ucmp.contract.dto.CompanyDto">
		select
			company_title companyTitle,
			tax_number taxNumber,
			address,
			phone,
			receiving_bank receivingBank,
			receiving_bank_account receivingBankAccount
		from
			t_sys_company_info tci
		where tci.is_delete='00'
		and tci.is_enable='01'
	</select>
	
	<select id="queryCarInfo" resultType="com.exp.ucmp.contract.dto.CarInfoDto">
	select
		tsi.car_series_name carSeriesName,
		tsi.vin_code vinCode,
		tsi.base_car_type_name baseCarTypeName,
		tsi.interior_color interiorColor,
		tsi.car_colour carColour,
		tsi.new_car_price newCarPrice,
		tsi.first_license_date firstLicenseDate,
		tsi.stock_mileage stockMileage,
		tsi.sale_price salePrice
	from
		t_psi_car_stock_info tsi
	where
		tsi.stock_id in (
		<foreach collection="stockIdList" item="stockId" separator="," index="index">
			#{stockId}
		</foreach>
		)
	</select>
</mapper>